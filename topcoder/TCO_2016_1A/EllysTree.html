<html><body bgcolor="#000000" text="#00ff00"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td>Elly has a graph with N+1 vertices, conveniently numbered from 0 to N.
The graph is actually a rooted tree, with the root being the vertex with number zero.
<br></br><br></br>

Elly can move between the vertices of her tree by jumping from one vertex to another.
Not all jumps are allowed.
Elly may jump from vertex A to vertex B if and only if one of A and B is a (direct or indirect) descendant of the other.
<br></br><br></br>

Elly is currently standing in the root of the tree: vertex 0.
She would like to make a sequence of N jumps that visits each of the other N vertices exactly once.

Note that Elly is allowed to jump over previously visited vertices.
For example, if A is an ancestor of B and B is an ancestor of C, Elly can jump from A to C or from C to A even if B has been already visited.
<br></br><br></br>

You are given the description of the tree: a vector &lt;int&gt; <b>parent</b> with N elements.
For each i between 0 and N-1, inclusive, the vertex <b>parent</b>[i] is the parent of the vertex (i+1).

If it is possible for Elly to visit each of the vertices 1 through N exactly once, return a vector &lt;int&gt; with N elements: the numbers of the vertices in the order in which she should visit them.
If there is more than one possible answer, return the lexicographically smallest one.
If there is no way to achieve her goal, return an empty vector &lt;int&gt; instead.</td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>EllysTree</td></tr><tr><td>Method:</td><td>getMoves</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>vector &lt;int&gt;</td></tr><tr><td>Method signature:</td><td>vector &lt;int&gt; getMoves(vector &lt;int&gt; parent)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>2.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Notes</h3></td></tr><tr><td align="center" valign="top">-</td><td>A tree is a connected graph with N+1 vertices and N edges. A rooted tree is a tree in which one vertex is labeled as the root.</td></tr><tr><td align="center" valign="top">-</td><td>In a rooted tree, the parent of vertex X is the first vertex on the path from X to the root. The root has no parent.</td></tr><tr><td align="center" valign="top">-</td><td>In a rooted tree, vertex X is a descendant of vertex Y if Y lies on the path from X to the root.</td></tr><tr><td align="center" valign="top">-</td><td>Given two equally long but different sequences of integers A and B, A is said to be lexicographically smaller than B if A contains a smaller number on the first position where they differ.</td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td><b>parent</b> will contain between 1 and 100 elements, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>parent</b> will be between 0 and |<b>parent</b>|, inclusive, where "|<b>parent</b>|" denotes the number of elements in parent (i.e. N).</td></tr><tr><td align="center" valign="top">-</td><td>It is guaranteed, that the given graph will be a valid rooted tree.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{9, 13, 7, 9, 8, 14, 14, 0, 6, 9, 2, 2, 5, 5, 7}</pre></td></tr></table></td></tr><tr><td><pre>Returns: {1, 5, 2, 11, 13, 12, 8, 3, 7, 15, 14, 4, 6, 9, 10 }</pre></td></tr><tr><td><table><tr><td colspan="2">The nodes Elly can jump to from node 6 are: {0, 8, 5, 14, 9, 10, 1, 4}.
</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{3, 4, 5, 0, 2}</pre></td></tr></table></td></tr><tr><td><pre>Returns: {1, 2, 3, 4, 5 }</pre></td></tr><tr><td><table><tr><td colspan="2">There are no branches in this tree, thus Elly can traverse it in any order.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0, 0}</pre></td></tr></table></td></tr><tr><td><pre>Returns: { }</pre></td></tr><tr><td><table><tr><td colspan="2">The root has two children. No matter which of them Elly chooses first, she will not be able to get to the other, since the girl has to go back to the root, which is already visited.</td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{0, 6, 6, 2, 6, 1, 3, 5}</pre></td></tr></table></td></tr><tr><td><pre>Returns: {2, 4, 1, 3, 7, 6, 5, 8 }</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
